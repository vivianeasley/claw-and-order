<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Claw & Order</title>
    <style>*{box-sizing:border-box;margin:0}.c{font-size:100px;width:66px;height:82px;background:#fff;border-radius:3px;position:relative;line-height:.72;display:inline-block;vertical-align:top;margin:2px;cursor:pointer;overflow:hidden}.a{min-height:60px;margin:0 0 10px;position:relative;border:5px ridge grey;min-height:98px;background:#fff}.h{height:98px}.d .c{background:#000;position:absolute;top:0;left:0;right:0;bottom:0}.d .c:after{background:#fff;content:"\1f0a0";position:absolute;top:0;left:0;right:0;bottom:0;color:#000!important}.t .c:not(:last-child){width:20px;margin:0}.sun{font-size:75px}.cw{position:relative;pointer-events:none}.cl,.cr{position:absolute;bottom:0;width:325px;transition:transform 1s ease-out}.cl{left:0}.cr{right:0}.cr.hi{transform:translate(300px)}.cl.hi{transform:translate(-300px)}.controls div{margin:6px;min-height:23px;background:#f1f1f1}.controls div button{float:right;padding:2px;cursor:pointer}.stats span{color:red;font-weight:700}.container{display:flex}.container.below{position:absolute;bottom:0;left:0;right:0;height:200px;opacity:1;transition:transform 1s ease-out}.container.below.hi{transform:translateY(-600px)}.boxes{border:5px ridge grey;background:#fff}.item-left,.item-right,.item-center,.item-bottom-left{position:relative;z-index:2;padding:1px;min-height:98px;max-height:196px;margin:0 2px 4px}.item-left{width:86px;height:98px}.item-bottom-left{width:120px;padding:6px}.item-right{width:275px}.item-center{flex-grow:1;overflow-x:auto}.te{padding:6px}.start-hide{display:none}.enable-transitions{transition:all .2s ease-in-out}.center{text-align:center}.story,.game-area-wrapper{transition:all 1.5s ease-out}.card-transitions{transition:all .2s ease-in-out}.main{height:100vh;max-height:450px;max-width:1000px;margin:0 auto;overflow:hidden;position:relative;text-align:center}.table{background-image:url(data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAADdAQAAAABWZ/VNAAAAXElEQVR4Aa1LBxHAQAiLFKRUClIqBSlIqZQSct3j1q8sApZhN07aG3PH2Bu+c96UNB291Z+Vl/cLs2Xt2LAdmfzwjkBuqjBgSm4MztmTUtazqfd2Jaa/ovJdDT4rUQZeAU+TvGEAAAAASUVORK5CYII=);background-position:0%;background-repeat:repeat-x;position:absolute;top:10%;left:0;right:0;height:300px}.table.hide{transform:scaleY(2.5)}.cat{position:relative;z-index:10}.cat.hide{transform:translateY(-200px)}.cop1,.cop2{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAADhAQMAAAAu4XPTAAAABlBMVEVHcEwAAACfKoRRAAAAAXRSTlMAQObYZgAAAN5JREFUeAFiQAaAduoQJ4MgBqDwNCNGViJ7DGSP1qv9R0LiiqVPbDMZdgkJ8kueflY0Vn4UR+brGyWrJ6ywwwFntcATXrDC1tjhgPPa0ng2Xo21sR3aH3Y86n/7w35v/AYv+rCfhx6dY9MOG6yw7DquPWhvbDdb/5jtl+3X1qz2y9/PrDY4qxfs1ZLVCnu1ZLXCDmf1hBV2OKsFnvCCtbE19sbROK8tjeem16a1sW3aNx2bzjPLoeeh16b1h22H9psdNzsbO6zwoA0e9IKH5Kckfu3wgkfAAg+Bx5iRry/vgS9iuUUnvwAAAABJRU5ErkJggg==);width:215px;height:399px;background-repeat:no-repeat;background-size:cover}.cop1{float:right}.cop1.hide{transform:translate(190px)}.cop2-wrapper{float:left;transform:scaleX(-1)}.cop2.hide{transform:translate(190px)}.cops{position:absolute;left:0;right:0;bottom:0;z-index:20;pointer-events:none}.box{border:5px ridge grey;background:#fff}.story-area{width:500px;height:150px;position:absolute;z-index:25;top:0;left:0;right:0;bottom:0;margin:25% auto}.story-area.hide{transform:translateY(-550px)}.game-area-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;padding:4px}.game-area-wrapper.hide{transform:translateY(-600px)}.game-area{display:flex;position:relative}.zones{position:relative;z-index:2;padding:1px;min-height:98px;max-height:196px;margin:0 2px 4px;text-align:left}.deck{width:86px;height:98px}.deck .c{background:#000;position:absolute;top:0;left:0;right:0;bottom:0}.deck .c:after{background:#fff;content:"\1f0a0";position:absolute;top:0;left:0;right:0;bottom:0;color:#000!important}.play,.discard{flex-grow:1}.discard .c:not(:last-child){width:20px;margin:0}.stats{flex-grow:1;min-width:110px}.controls{flex-grow:1;min-width:205px}.text-area,.story-area{padding:4px;overflow-x:auto;text-align:left}.text-area div:not(:last-child),.story-area div:not(:last-child){border-bottom:1px solid grey;margin:0 0 8px;padding:0 0 8px}.top{flex:0 1 auto;max-height:167px}h3{background:white}
</style>
  </head>
  <body>

    <div class="main">
      <div class="table story"></div>
            <img class="cat story" src="data:image/png;base64,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" />
      <div class="cops">
        <div class="cop1 story"></div>
        <div class="cop2-wrapper">
          <div class="cop2 story"></div>
        </div>
      </div>
      <div class="story-area box story">
          <h1 style="text-align: center; border-top: 8px solid #000; border-bottom: 8px solid #000; max-width: 200px; margin: 0 auto">Claw & Order</h1>
        <br>
        <div>Bennet: Hello, I'm detective Bennet. I'll be cat translating through this interrogation (Tap on the text to proceed. Space bar to skip story. "s" to toggle sound. "m" for medium difficulty, "h" for hard).</div>
      </div>
      <div class="game-area-wrapper game hide">
        <div class="game-area top">
          <div class="zones box stats">
            <div class="center"><select class="select">
            </select></div>
            <h3 class="center">-Stashes-</h3>
            <div style="display: inline-block;"><div>â™ : <span></span></div>
            <div>â™¥: <span></span></div></div>            
            <div style="display: inline-block; float: right;"><div>â™¦: <span></span></div>
            <div>â™£: <span></span></div></div>
            <div><div>'ðŸ‚¡'/'ðŸ‚«'/'ðŸƒŸ': <span></span></div></div>
            <hr>
            <div class="center" style="margin-top: 6px;"><button data-f="pass">Pass turn</button>
              <div><h3>Total: <span></span>/<span></span></h3></div></div>
          </div>
          <div class="zones box controls">
            <div>20xâ™£<button data-f="add">Add 2</button></div>
            <div>20xâ™ <button data-f="subtract">Subtract 3</button></div>
            <div>20xâ™¦<button data-f="redraw">Redraw</button></div>
            <div>10xâ™ â™£â™¦<button data-f="remove">Remove Card</button></div>
            <div>60xâ™ â™£â™¦â™¥<button data-f="addFaceCard">Add Face Card</button></div>
          </div>
          <div class="zones box text-area">Bennet: He says the rules are as follows. 
            <ul style="color:red">
              <li>The goal of the game is to win a round with 20 Aces, Jokers or face cards in your deck.</li>
              <li>Use the dropdown in the top left to see whats in your base deck.</li>
              <li>To start tap on the deck in the center left to draw a card.</li>
              <li>Draw at least 2 cards without exceeding the max of 23, similiar to Blackjack.</li>
              <li>If our total is exactly 23 after drawing we win the round!</li>
              <li>If we go over the max or have 0 hearts in our stash we immeditaly lose.</li>
              <li>You can pass at any time after you have drawn the required number of cards but if you are under your max that will be subtracted from your stash of hearts</li>
            </ul>
          </div>
        </div>  
        <div class="game-area">
          <div class="zones box deck zone-area"></div>
          <div class="zones box play zone-area"></div>
        </div>
        <div class="game-area">
          <div class="zones box discard zone-area"></div>
        </div>   
      </div>
    </div>

<script>let V=[2,3,5,10],z=["Jack","Knight","Queen","King"],ue=["\u{1F0A2}","\u{1F0B2}","\u{1F0C2}","\u{1F0D2}","\u{1F0A3}","\u{1F0B3}","\u{1F0C3}","\u{1F0D3}","\u{1F0A5}","\u{1F0B5}","\u{1F0C5}","\u{1F0D5}","\u{1F0AA}","\u{1F0BA}","\u{1F0CA}","\u{1F0DA}"],he=["\u{1F0AB}","\u{1F0BB}","\u{1F0CB}","\u{1F0DB}","\u{1F0AC}","\u{1F0BC}","\u{1F0CC}","\u{1F0DC}","\u{1F0AD}","\u{1F0BD}","\u{1F0CD}","\u{1F0DD}","\u{1F0AE}","\u{1F0BE}","\u{1F0CE}","\u{1F0DE}"],fe=["\u{1F0A1}","\u{1F0B1}","\u{1F0C1}","\u{1F0D1}"],u="Mr. Fluffy Pants",J=["You &%$#, you're just toying with us aren't you!",`Is this a game to you!!! There's a backyard full of dead birds and it's got ${u} written all over it!`,"Well that orphanage certainly didn't burn itself down.","Don't play coy with me. I invented coy! I've got a goddamn patent on being coy!","You think you're tough! I eat pancakes shaped like your face for breakfast!","You think you're tough! I'll pett you 1 too many times!","You want to dance tough guy? I'll feed you 5 minutes after your normal dinner time!","I don't play by your rules","I get results","I'm getting too old for this &*^%","I'm a dog person","Would you like some fishy-lump treats? Well, tough! We're all out!"],G={d0:["rI'm detective Rivera.",`b${u} do you understand why you are being questioned today?`,"cMeow","bYou are currently being held on the suspicion of number of crimes including, but not limited to, murder 1.","cMeow, hiss","rWhat'd he say! Was that about me?!? Look, you little hairball you're on thin ice. We've got so much dirt on you we're going to put you away for life! We have witnesses\u2026","bI'm sorry about my partner. They have a bit of a temper.","cMeow",`bYes ${u}`,"cMeow","bYes, uh huh","cMeow","bYes, I understand that but... there has to be some kind of understanding we can reach. We are prepared to offer you a good deal in exchange for information on the crime sydicate we know you are part of.","cMeow","bHe says he's thinking","cMeow, meow meow","bHe says he'd like to play a game. His game is blackjack but that might be boring for detectives as smart as us so he's spiced it up a bit.","bHe says if we win he game he'll answer any questions we have but if we lose he'll have nothing to say until his lawyer arrives.","rI'm not here to play games!!!!","bAgain I apologize for my partner... how can we say no to such an offer. Lets play your little game."],d1:["cMeow, meow.","bHe says we're doing well enough that he'd like to raise the stakes. We are now required to draw 3 cards each round. In return, if we win he'll lead us too a vast treasure he buried.","rTreasure you say...",`bWhoa now Rivera. Lets not have annother It's a Mad Mad Mad Mad World debacle. We accept your terms ${u}`],d2:[`rYou seem to be sweating ${u}, how about you add another required card draw for... lets say the location of your secret lair.`,"cMeow.","bHe says cats don't sweat and he be more than happy to give us more information for making the game harder."],d3:[`rAgain! more required cards to draw! We're taking you down ${u} with your own game!`,"cMeow, hiss, hiss, rawr, hiss","rLets dance."]},R=["rTake that!","cMeow","bHe says well played but he still has nothing to say to us, just thanks for helping him pass the time",`rNo thank you ${u}. That's probably been long enough wouldn't you say detective Bennet?`,"bYes, we probably have everything we need by now","cMeow?",`bThat's correct ${u}, this was all a distraction to buy us enough time to raid the headquarters, of the most natorious feline crime syndicate in the city.`,"cMeow, meow, meow",`bYou're wrong ${u}, we will indeed find evidence we need to make a case against you because, you see, ${u} there's a mole in your organization and we know exactly where to look.`,"cMeow, meow, meow",`bHa no, this isn't a bluff, you're going away for a very, very, very long time ${u}.`],B=["cMeow, meow, meow","bHe says it looks like our luck has run out, his little cat whiskers are sealed until his lawyer arrives. Better luck next time detectives (click to play again)"],Z={s:"\u2660",h:"\u2665",d:"\u2666",c:"\u2663"},U=["s","h","d","c","l","t","m"],Q=Object.keys(Z),ye=ne(ue),X=ne(he,!0),me=fe.map((e,t)=>({iconK:e,valueK:1,idK:Q[t],nameK:"Ace"})),we={iconK:"\u{1F0DF}",valueK:10,nameK:"Joker"},m=!0,y=0,$=!1,v=0,x=0,N=2,F=20,f,M,h,c,K=!1,S=!1,_=!0,r={sK:0,hK:15,dK:0,cK:0,lK:0,tK:0,mK:23},L=e=>document.querySelectorAll(e),w=e=>document.querySelector(e),E=e=>document.createElement(e),H=L(".zone-area"),ge=w(".controls"),pe=ge.querySelectorAll("div"),D=w(".text-area"),p=w(".story-area"),ee=H[0],Ke=H[1],te=H[2],be=L("span"),q=w(".select"),ke=w(".top"),g=e=>({c0:r.cK>19,c1:r.sK>19,c2:r.dK>19,c3:r.sK>9&&r.cK>9&&r.dK>9,c4:r.sK>59&&r.cK>59&&r.dK>59&&r.hK>59})[e],Y=e=>e.innerHTML="",C=(e,t)=>e.appendChild(t.nodeK),T=e=>(e.nodeK=E("div"),e.nodeK.classList.add("c"),e.nodeK.textContent=e.iconK,e.nodeK.dataset.id=e.idK,e),ve={pass:()=>{if(K)return;i("wWe pass the turn");let e=r.mK-r.tK;if(r.mK<r.tK){K=!0,se(!1);return}if(c.length<N){i("bHe says you have to draw more cards to pass.",!0);return}if(c.length>5){let t=c.length-5;r.cK+=t*3,r.dK+=t*3,r.hK+=t*3,r.sK+=t*3,i("bWe added extra to our stash for drawing over 3 cards (extra x 3 of each stash)!",!0)}r.hK-=e,r.tK=0,v++,de(),i(`bWe lost ${e} hearts`),e>5&&e<10&&i("cMeow"),e>10&&i("cPurrr"),e<5&&i("cHisss"),O(c,h,c.length)},add:()=>{g("c0")&&(r.cK-=20,r.tK+=2,i("wWe use the add 2 ability"))},subtract:()=>{g("c1")&&(r.sK-=20,r.tK-=3,i("wWe use the subtract 3 ability"),r.tK<0&&i("cHe says: Very tricky"))},redraw:()=>{g("c2")&&(r.dK-=20,O(c.reverse(),h,1),re(),i("wWe redraw the last card"))},remove:()=>{if($&&i("bMr. Fluffy says we need to tap on a card.",!0),i("bMr. Fluffy says you can click on a discarded card to remove it from your deck forever!",!0),h&&h.length===0){i("bHe says you need to have at least 1 card in your discard!",!0);return}g("c3")&&(r.sK-=10,r.cK-=10,r.dK-=10,$=!0)},addFaceCard:()=>{if(g("c4")){r.sK-=60,r.cK-=60,r.dK-=60,r.hK-=60;let e=X[P(0,X.length-1)];e=T(e);let t=e.idK+f.length;h.push({...e,idK:t}),f.push({...e,idK:t}),r.mK+=3,i("bFor each face card added to your deck he'll raise the max by 7. If you win a round with 20 or more Ace, Joker, or face cards you win the game and he'll tell us everything we want to know.",!0)}}};document.addEventListener("keydown",e=>{e.key==" "&&(K&&location.reload(),m&&(Y(p),m=!1,y=0,oe())),e.key=="s"&&(_=!1),e.key=="m"&&(F=8,i("bWe've switched to medium difficulty",!0,!0)),e.key=="h"&&(F=4,i("bWe've switched to hard difficulty",!0,!0))});p.addEventListener("click",()=>{(K&&!B[y]||S&&!R[y])&&location.reload();let e;S?e=R[y]:K?e=B[y]:e=G["d"+x][y],m&&e?(i(e),y++):(Y(p),m=!1,y=0,oe())});function j(){L(".story").forEach(o=>{o.classList.remove("hide")}),w(".game").classList.add("hide")}function oe(){w(".game").classList.remove("hide"),L(".story").forEach(o=>{o.classList.add("hide")})}ke.addEventListener("click",e=>{!e.target.dataset.f||(ve[e.target.dataset.f](),le(),I())});ee.addEventListener("click",()=>{if(r.tK>r.mK){i(`bMr. Fluffly says that you went over ${r.mK}. Either buy an ability or pass to lose the game (followed by meniacal cat laughter.)`,!0);return}re()});function re(){if(M.length===0){let o=h.splice(0,h.length);ie(o),M=[...o]}O(M,c,1);let e=c[c.length-1];e.valueK>5&&i("r"+J[P(0,J.length-1)]),r[e.idK[0]+"K"]+=e.valueK+2;let t=0;r.tK=c.reduce((o,a)=>o+a.valueK,t),le(),I()}te.addEventListener("click",e=>{if(!(!$||!e.target.dataset.id)){for(let t=0;t<h.length;t++)e.target.dataset.id===h[t].idK&&(h.splice(t,1),I());for(let t=0;t<f.length;t++)e.target.dataset.id===f[t].idK&&(f.splice(t,1),I());$=!1}});ae();function ae(){k("ipuwx-t-----upli-lp-n-----binp-rm-----nlida-ki","sine",.3),f||(f=Ce()),r.tK=0,M=ie([...f]),h=[],c=[],Me()}function Me(){I()}function I(){Ie();let t=[...L(".c")].map(function(o){return o.classList.remove("enable-transitions"),{el:o,first:o.getBoundingClientRect()}});H.forEach(o=>Y(o)),M.forEach(o=>C(ee,o)),c.forEach(o=>C(Ke,o)),h.forEach(o=>C(te,o)),be.forEach((o,a)=>{U[a]==="l"?(r.lK=ce(),o.textContent=r.lK):o.textContent=r[U[a]+"K"]}),pe.forEach((o,a)=>{g("c"+a)?o.style.opacity="1":o.style.opacity="0.1"}),t.forEach(o=>{var a=o.el.getBoundingClientRect(),n={top:o.first.top-a.top,left:o.first.left-a.left};o.el.style.transform=`translate(${n.left}px, ${n.top}px)`,setTimeout(()=>{o.el.classList.add("enable-transitions"),o.el.style.transform=""},200)})}function ne(e,t){return e.map((o,a)=>{let n=Math.floor(a/4),s=Q[a%4],d=V[n];return{idK:s+(t?a+10:d),iconK:o,valueK:t?10:V[n],nameK:t?z[n]:void 0}})}function Ce(){return ye.map((t,o)=>(T(t),t))}function ie(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,o)=>t.sort-o.sort).map(({value:t})=>t)}function Ie(){Y(q);let e=E("option");e.textContent="Base Deck",C(q,{nodeK:e}),f.sort((t,o)=>t.valueK-o.valueK).forEach(t=>{e=E("option");let o=Z[t.idK[0]];e.textContent=`${o||t.idK[0]}-${t.nameK?t.nameK:t.valueK}`,C(q,{nodeK:e})})}function O(e,t,o=1){if(e.length===0||o>e.length)return;e.length,e.splice(0,o).reverse().forEach(n=>t.push(n))}let A=e=>e.split("").sort(function(){return .5-Math.random()}).join("");function i(e,t,o){let a=E(o?"h2":"div"),n={w:"Detectives: ",c:`${u}: `,r:"Rivera: ",b:"Bennet: "};const s=e.substring(0,1);(m||t)&&(s==="c"&&k(A("hgklrsm"),.1),s==="r"&&k(A("acXUeTVbf"),.1),s==="b"&&k(A("ZYXUTV"),.1),s==="w"&&k(A("VVUXcZaXUTfYe"),.1));const d=e.substring(1);a.textContent=n[s]+d,t&&(a.style.color="red"),m?p.appendChild(a):D.appendChild(a),D.scrollTo(0,D.scrollHeight),p.scrollTo(0,p.scrollHeight)}function se(e){if(e){S=!0,m=!0,j(),i("bWe did it we won!",!0);return}K=!0,m=!0,j(),i("rGoddamit we lost!",!0)}function le(){if(r.tK===r.mK){if(ce()>19){se(!0);return}i(`rWe got ${r.mK}!`,!0,!0),i("bHe says that for winning a round he's added an Ace to our deck and a Joker. Aces add 1 to our total but 11 to our stash. Jokers add 10 to our total and nothing to our stash. Also, he's added 60 to our entire stash!");let t={...we,idK:"j"+v};t=T(t),f.push(t);let o=me[P(0,3)],a={...o,idK:o.idK+(11+v)};a=T(a),f.push(a),r.sK+=20,r.cK+=20,r.dK+=20,r.hK+=20,r.tK=0,v+=4,de(),ae()}}function de(){v%F===0&&(x<3&&x++,N++,i(`bLooks like the minimum number of cards we have to draw to pass is now ${N}`,!0,!0),m=!0,j(),i(G["d"+x][y]),y++)}function ce(){let e=[...z,"Joker","Ace"],t=0;return f.forEach(o=>{e.includes(o.nameK)&&t++}),t}function P(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}function k(e,t,o){if(!_)return;let a,n={5:.4,4:.3,3:.2,2:.1,1:.05},s=Object.keys(n);s.push("-"),window.AudioContext=window.AudioContext||window.webkitAudioContext;let d=new AudioContext;if(!d)return;let W=d.createGain();for(let l=0;l<e.length;l++){a=isNaN(e[l+1])?o||.1:n[e[l+1]];let b=d.createOscillator();e[l=+l]&&!s.includes(e[l])&&(b.connect(W),W.connect(d.destination),b.start(l*a+.3),b.frequency.setValueAtTime(440*1.06**(-105+e.charCodeAt(l)),l*a+.3),b.type=t||"sine",W.gain.setValueAtTime(.5,l*a+.3),W.gain.setTargetAtTime(.001,l*a+.3+.1,.05),b.stop(l*a+.3+a-.01))}}
</script>
    
  </body>
</html>
